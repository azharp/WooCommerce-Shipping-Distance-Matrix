!function(e){"use strict";var t={init:function(){var t=this;wcsdm_params.show_settings&&setTimeout(function(){for(var t=!1,c=e(document).find(".wc-shipping-zone-method-type"),s=0;s<c.length;s++){var o=c[s];if(e(o).text()==wcsdm_params.method_title)return e(o).closest("tr").find(".row-actions .wc-shipping-zone-method-settings").trigger("click"),void(t=!0)}t||(e(".wc-shipping-zone-add-method").trigger("click"),e("select[name='add_method_id']").val(wcsdm_params.method_id).trigger("change"))},200),e(document).on("click",".wc-shipping-zone-method-settings",function(){e(this).closest("tr").find(".wc-shipping-zone-method-type").text()===wcsdm_params.method_title&&e("#woocommerce_wcsdm_gmaps_api_units").trigger("change")}),e(document).on("change","#woocommerce_wcsdm_gmaps_api_units",function(){e(".input-group-distance").removeClass("metric imperial").addClass(e(this).val()),e("#per_distance_unit_selected").text(e(this).find("option:selected").text()),e(".input-group-price").removeClass("metric imperial"),e("#woocommerce_wcsdm_charge_per_distance_unit").is(":checked")&&e(".input-group-price").addClass(e(this).val())}),e(document).on("change","#woocommerce_wcsdm_charge_per_distance_unit",function(){e(".input-group-price").removeClass("metric imperial"),e(this).is(":checked")&&e(".input-group-price").addClass(e("#woocommerce_wcsdm_gmaps_api_units").val())}),e(document).on("click","#rates-list-table tbody .select-item",t._selectRateRows),e(document).on("click","#rates-list-table thead .select-item",t._toggleRateRows),e(document).on("click","#rates-list-table a.add",t._addRateRows),e(document).on("click","#rates-list-table a.remove_rows",t._removeRateRows)},_selectRateRows:function(t){var c=e(t.currentTarget),s=c.closest("tbody").find("input[type=checkbox]"),o=c.closest("tbody").find("input[type=checkbox]:checked");o.length&&o.length===s.length?c.closest("table").find("thead input[type=checkbox]").prop("checked",!0):c.closest("table").find("thead input[type=checkbox]").prop("checked",!1),o.length?(c.closest("table").find(".button.remove_rows").show(),c.closest("table").find(".button.add").hide()):(c.closest("table").find(".button.remove_rows").hide(),c.closest("table").find(".button.add").show()),s.each(function(t,c){e(c).is(":checked")?e(c).closest("tr").addClass("selected"):e(c).closest("tr").removeClass("selected")})},_toggleRateRows:function(t){var c=e(t.currentTarget);c.is(":checked")?(c.closest("table").find("tr").addClass("selected").find("input[type=checkbox]").prop("checked",!0),c.closest("table").find("tbody input[type=checkbox]").length&&(c.closest("table").find(".button.remove_rows").show(),c.closest("table").find(".button.add").hide())):(c.closest("table").find("tr").removeClass("selected").find("input[type=checkbox]").prop("checked",!1),c.closest("table").find("tbody input[type=checkbox]").length&&(c.closest("table").find(".button.remove_rows").hide(),c.closest("table").find(".button.add").show()))},_addRateRows:function(t){t.preventDefault();var c=wp.template("rates-list-input-table-row"),s={field_key:e(t.currentTarget).data("key"),distance_unit:e("#woocommerce_wcsdm_gmaps_api_units").val(),charge_per_distance_unit:e("#woocommerce_wcsdm_charge_per_distance_unit").is(":checked")?e("#woocommerce_wcsdm_gmaps_api_units").val():""};e("#rates-list-table tbody").append(c(s))},_removeRateRows:function(t){t.preventDefault();var c=e(t.currentTarget);c.hide(),c.closest("table").find(".button.add").show(),c.closest("table").find("thead input[type=checkbox]").prop("checked",!1),c.closest("table").find("tbody input[type=checkbox]").each(function(t,c){e(c).is(":checked")&&e(c).closest("tr").remove()})}};e(document).ready(function(){t.init()})}(jQuery);